@(preparedTableRows: List[scala.xml.Elem],
  potentialMoveOrders: play.api.libs.json.JsValue,
  potentialSupportHoldOrders: play.api.libs.json.JsValue,
  potentialSupportMoveOrders: play.api.libs.json.JsValue,
  potentialConvoyOrders: play.api.libs.json.JsValue,
	mapElement: String,
	orderHandlerURL: String)
@import com.squeryl.jdip.tables.OrderType
@import com.squeryl.jdip.tables.UnitType
@import controllers.GameScreenController
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
	"http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:svg="http://www.w3.org/2000/svg" 
      xmlns:xlink="http://www.w3.org/1999/xlink">
<body>
<div style="margin: 0px auto;">
	@Html(mapElement)
</div>
<form method="POST" action="@orderHandlerURL">
<table style="margin: 0px auto;">
	<thead>
		<tr>
			<td>Unit Type</td>
			<td>Unit Location</td>
			<td>Order Type</td>
			<td></td>
			<td></td>
		</tr>
	</thead>
	@preparedTableRows
</table>
</form>
</body>
<script type="text/javascript" src="/public/javascripts/jquery-1.5.1.js">
</script>
<script type="text/javascript">
	function getPotentialMoveOrders() {
		return @Html(potentialMoveOrders.toString);
	}

	function getPotentialSupportHoldOrders() {
		return @Html(potentialSupportHoldOrders.toString);
	}

	function getPotentialSupportMoveOrders() {
		return @Html(potentialSupportMoveOrders.toString);
	}

	function getPotentialConvoyOrders() {
		return @Html(potentialConvoyOrders.toString);
	}

	function createClassName(name) {
		return "." + name;
	}

	$(document).ready(function() {
		$(".@GameScreenController.UNIT_ORDER").change(function() {
			var id = this.parentElement.parentElement.id;
			var idSelector = "#" + id;
			var targetLocationSelector = idSelector + " .@GameScreenController.TARGET_LOCATION";
			var sourceLocationSelector = idSelector + " .@GameScreenController.SOURCE_LOCATION";
			
			$(targetLocationSelector).empty();
			$(sourceLocationSelector).empty();
			
			var moveOrdersSelector = ".moveOrders ul." + id;
			var supportHoldOrdersSelector = ".supportHoldOrders ul." + id;
			var supportMoveOrdersSelector = ".supportMoveOrders ul." + id + " ul";
			var convoyOrdersSelector = ".convoyOrders ul." + id + " ul";
			
			switch($(this).val()) {
				case "Hold": {
					break;
				}
				case "Move": {
					createBasicOrder(id, moveOrdersSelector, targetLocationSelector);
					break;
				}
				case "Support Hold": {
					createBasicOrder(id, supportHoldOrdersSelector, targetLocationSelector);
					break;
				}
				case "Support Move": {
					createAdvancedOrder(supportMoveOrdersSelector, 
										sourceLocationSelector,
										targetLocationSelector,
										id);
					break;
				}
				case "Convoy": {
					createAdvancedOrder(convoyOrdersSelector, 
										sourceLocationSelector,
										targetLocationSelector,
										id);
					break;
				}
			}
			
			
		});
	});
</script>
</html>
